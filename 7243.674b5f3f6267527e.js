"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7243],{7243:(q,v,d)=>{d.r(v),d.d(v,{EstacionamientoIPageModule:()=>O});var p=d(6814),_=d(95),s=d(6728),m=d(1379),g=d(5861),f=d(2322),o=d(5678),h=d(6751),Z=d(6075);function b(t,r){if(1&t){const i=o.EpF();o.TgZ(0,"div",22)(1,"ion-card",23)(2,"ion-card-header")(3,"ion-card-title"),o._uU(4),o.qZA()(),o.TgZ(5,"ion-card-content")(6,"ion-text"),o._uU(7),o.qZA(),o._UZ(8,"br"),o.TgZ(9,"ion-text"),o._uU(10),o.qZA(),o._UZ(11,"br"),o.TgZ(12,"ion-text"),o._uU(13),o.qZA(),o._UZ(14,"br"),o.TgZ(15,"ion-text"),o._uU(16,"Uso: Libre"),o.qZA()(),o.TgZ(17,"ion-item",24)(18,"ion-button",25),o.NdJ("click",function(){const e=o.CHM(i).$implicit,c=o.oxw(2);return o.KtG(c.addFavoritos(e._id,e.favorito))}),o._UZ(19,"ion-icon",26),o.qZA()()()()}if(2&t){const i=r.$implicit;o.xp6(4),o.hij("Numero: ",i.numero,""),o.xp6(3),o.hij("Estacionamiento: ",i.estacionamiento,""),o.xp6(3),o.hij("Seccion: ",i.seccion,""),o.xp6(3),o.hij("Estado: ",i.estado,"")}}function x(t,r){if(1&t&&(o.TgZ(0,"div")(1,"h4",10),o._uU(2),o.qZA(),o.TgZ(3,"div",20),o.YNc(4,b,20,4,"div",21),o.qZA()()),2&t){const i=o.oxw();o.xp6(2),o.hij("Puestos favoritos: ",i.cantidadFavoritos,""),o.xp6(2),o.Q6J("ngForOf",i.favoritos)}}function T(t,r){if(1&t){const i=o.EpF();o.TgZ(0,"div",22)(1,"ion-card",27)(2,"ion-card-header")(3,"ion-card-title"),o._uU(4),o.qZA()(),o.TgZ(5,"ion-card-content")(6,"ion-text"),o._uU(7),o.qZA(),o._UZ(8,"br"),o.TgZ(9,"ion-text"),o._uU(10),o.qZA(),o._UZ(11,"br"),o.TgZ(12,"ion-text"),o._uU(13),o.qZA(),o._UZ(14,"br"),o.TgZ(15,"ion-text"),o._uU(16,"Uso: Libre"),o.qZA()(),o.TgZ(17,"ion-item",24)(18,"ion-button",25),o.NdJ("click",function(){const e=o.CHM(i).$implicit,c=o.oxw(2);return o.KtG(c.addFavoritos(e._id,e.favorito))}),o._UZ(19,"ion-icon",28),o.qZA()()()()}if(2&t){const i=r.$implicit;o.xp6(4),o.hij("Numero: ",i.numero,""),o.xp6(3),o.hij("Estacionamiento: ",i.estacionamiento,""),o.xp6(3),o.hij("Seccion: ",i.seccion,""),o.xp6(3),o.hij("Estado: ",i.estado,"")}}function P(t,r){if(1&t&&(o.TgZ(0,"div")(1,"h4",10),o._uU(2),o.qZA(),o.TgZ(3,"div",20),o.YNc(4,T,20,4,"div",21),o.qZA()()),2&t){const i=o.oxw();o.xp6(2),o.hij("Puestos libres: ",i.cantidadLibres,""),o.xp6(2),o.Q6J("ngForOf",i.libres)}}function U(t,r){if(1&t){const i=o.EpF();o.TgZ(0,"div",22)(1,"ion-card",29)(2,"ion-card-header")(3,"ion-card-title"),o._uU(4),o.qZA()(),o.TgZ(5,"ion-card-content")(6,"ion-text"),o._uU(7),o.qZA(),o._UZ(8,"br"),o.TgZ(9,"ion-text"),o._uU(10),o.qZA(),o._UZ(11,"br"),o.TgZ(12,"ion-text"),o._uU(13),o.qZA(),o._UZ(14,"br"),o.TgZ(15,"ion-text"),o._uU(16,"Uso: Libre"),o.qZA()(),o.TgZ(17,"ion-item",24)(18,"ion-button",25),o.NdJ("click",function(){const e=o.CHM(i).$implicit,c=o.oxw(2);return o.KtG(c.addFavoritos(e._id,e.favorito))}),o._UZ(19,"ion-icon",28),o.qZA()()()()}if(2&t){const i=r.$implicit;o.xp6(4),o.hij("Numero: ",i.numero,""),o.xp6(3),o.hij("Estacionamiento: ",i.estacionamiento,""),o.xp6(3),o.hij("Seccion: ",i.seccion,""),o.xp6(3),o.hij("Estado: ",i.estado,"")}}function A(t,r){if(1&t&&(o.TgZ(0,"div")(1,"h4",10),o._uU(2),o.qZA(),o.TgZ(3,"div",20),o.YNc(4,U,20,4,"div",21),o.qZA()()),2&t){const i=o.oxw();o.xp6(2),o.hij("Puestos ocupados: ",i.cantidadOcupados,""),o.xp6(2),o.Q6J("ngForOf",i.ocupados)}}const E=[{path:"",component:(()=>{var t;class r{constructor(n,a,e){this.popoverController=n,this.database=a,this.cdr=e,this.opciones={op1:"favoritos",op2:"discapacitados",op3:"ocupados",op4:"libres"},this.puestos=[],this.seccion=[],this.libres=[],this.ocupados=[],this.favoritos=[],this.discapacitados=[],this.cantidadTotal=0,this.cantidadFavoritos=0,this.cantidadDiscapacitados=0,this.cantidadLibres=0,this.cantidadOcupados=0}ngOnInit(){this.getEstacionamientos(),setInterval(()=>{this.getEstacionamientos(),this.filtrarLibres(),this.filtrarOcupados(),this.filtrarFavoritos(),this.cdr.detectChanges()},3e3)}getEstacionamientos(){var n=this;return(0,g.Z)(function*(){(yield n.database.getEstacionamiento()).subscribe(a=>{n.puestos=a,n.filtrarFavoritos(),console.log(n.puestos)},a=>{console.log(a)})})()}filtrarSeccion(n){let a=n.detail.value;this.seccion=this.puestos.filter(e=>e.seccion==a&&"I"==e.estacionamiento),this.cantidadTotal=this.seccion.length,this.filtrarLibres(),this.filtrarOcupados(),this.filtrarFavoritos(),this.cdr.detectChanges()}filtrarLibres(){this.libres=this.seccion.filter(n=>"Desocupado"==n.estado&&0==n.favorito),this.cantidadLibres=this.libres.length}filtrarOcupados(){this.ocupados=this.seccion.filter(n=>"Ocupado"==n.estado&&0==n.favorito),this.cantidadOcupados=this.ocupados.length}filtrarFavoritos(){this.favoritos=this.puestos.filter(n=>1==n.favorito),this.cantidadFavoritos=this.favoritos.length}filtrarDiscapacitados(){this.discapacitados=this.puestos.filter(n=>1==n.discapacitado),this.cantidadDiscapacitados=this.discapacitados.length}addFavoritos(n,a){var e=this;return(0,g.Z)(function*(){let c=[...e.puestos],l=c.findIndex(u=>u._id===n);c[l].favorito=!a,console.log(c[l],l),e.filtrarLibres(),e.filtrarOcupados(),e.filtrarFavoritos(),e.cdr.detectChanges(),(yield e.database.updateEstacionamieno({favorito:c[l].favorito},c[l]._id)).subscribe(u=>{},u=>{console.log(u)})})()}presentPopover(n){var a=this;return(0,g.Z)(function*(){const e=yield a.popoverController.create({component:f.U,event:n,componentProps:{opciones:a.opciones}});yield e.present();const{data:c}=yield e.onDidDismiss();a.opciones=c||a.opciones})()}}return(t=r).\u0275fac=function(n){return new(n||t)(o.Y36(s.Dh),o.Y36(h.k),o.Y36(o.sBO))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-estacionamiento-i"]],decls:38,vars:4,consts:[["id","main-content",1,"ion-page"],["color","principal"],["slot","start"],["color","light"],["slot","end"],["id","popover-button",3,"click"],["name","filter-outline","slot","icon-only","color","light"],[1,"d-flex","justify-content-center","w-100","fondo"],[1,"body"],[1,"d-flex","justify-content-center"],[1,"text-white"],["src","../../assets/estacionamientoI.png","alt",""],[1,"d-flex","justify-content-between","mt-3"],[1,"w-25"],[3,"ionChange"],["slot","label"],["value","A"],["value","B"],["value","C"],[4,"ngIf"],[1,"row","d-flex","flex-wrap"],["class","col-12 col-sm-3",4,"ngFor","ngForOf"],[1,"col-12","col-sm-3"],[1,"favorito"],["lines","none"],["fill","clear","slot","end",3,"click"],["name","star","slot","icon-only","color","dark"],[1,"libre"],["name","star-outline","slot","icon-only","color","dark"],[1,"ocupado"]],template:function(n,a){1&n&&(o._UZ(0,"app-menu"),o.TgZ(1,"div",0)(2,"ion-header")(3,"ion-toolbar",1)(4,"ion-buttons",2),o._UZ(5,"ion-menu-button",3),o.qZA(),o.TgZ(6,"ion-buttons",4)(7,"ion-button",5),o.NdJ("click",function(c){return a.presentPopover(c)}),o._UZ(8,"ion-icon",6),o.qZA()()()(),o.TgZ(9,"ion-content")(10,"div",7)(11,"div",8)(12,"div",9)(13,"h1",10)(14,"b"),o._uU(15,"Estacionamiento I"),o.qZA()()(),o.TgZ(16,"div",9),o._UZ(17,"img",11),o.qZA(),o.TgZ(18,"div",12)(19,"h2",10),o._uU(20,"Por favor ingrese una seccion: "),o.qZA(),o.TgZ(21,"ion-list",13)(22,"ion-item")(23,"ion-select",14),o.NdJ("ionChange",function(c){return a.filtrarSeccion(c)}),o.TgZ(24,"div",15),o._uU(25,"Seccion"),o._UZ(26,"ion-text"),o.qZA(),o.TgZ(27,"ion-select-option",16),o._uU(28,"A"),o.qZA(),o.TgZ(29,"ion-select-option",17),o._uU(30,"B"),o.qZA(),o.TgZ(31,"ion-select-option",18),o._uU(32,"C"),o.qZA()()()()(),o.TgZ(33,"h3",10),o._uU(34),o.qZA(),o.YNc(35,x,5,2,"div",19)(36,P,5,2,"div",19)(37,A,5,2,"div",19),o.qZA()()()()),2&n&&(o.xp6(34),o.hij("Puestos totales de la secci\xf3n: ",a.cantidadTotal,""),o.xp6(1),o.Q6J("ngIf","favoritos"==a.opciones.op1),o.xp6(1),o.Q6J("ngIf","libres"==a.opciones.op4),o.xp6(1),o.Q6J("ngIf","ocupados"==a.opciones.op3))},dependencies:[p.sg,p.O5,s.YG,s.Sm,s.PM,s.FN,s.Zi,s.Dq,s.W2,s.Gu,s.gu,s.Ie,s.q_,s.fG,s.t9,s.n0,s.yW,s.sr,s.QI,Z.M],styles:[".fondo[_ngcontent-%COMP%]{background:rgb(31,31,31);min-height:100%}.body[_ngcontent-%COMP%]{width:90%}.favorito[_ngcontent-%COMP%]{background:rgb(252,236,15);background-size:80px;background-repeat:no-repeat;background-position-x:95%;background-position-y:20%}.favorito[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]::part(native){background:rgb(252,236,15)}.libre[_ngcontent-%COMP%]{background:rgb(2,219,129)}.libre[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]::part(native){background:rgb(2,219,129)}.ocupado[_ngcontent-%COMP%]{background:rgb(216,101,80)}.ocupado[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]::part(native){background:rgb(216,101,80)}.favoritoOcupado[_ngcontent-%COMP%]{background:rgb(105,105,102)}.favoritoOcupado[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]::part(native){background:rgb(105,105,102)}"]}),r})()}];let C=(()=>{var t;class r{}return(t=r).\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[m.Bz.forChild(E),m.Bz]}),r})();var I=d(6770);let O=(()=>{var t;class r{}return(t=r).\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[p.ez,_.u5,s.Pc,C,I.w]}),r})()}}]);